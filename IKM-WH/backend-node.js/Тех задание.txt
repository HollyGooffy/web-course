# Техническое задание (ТЗ)

## Бэкенд для сайта музыкального фестиваля

---

## 1. Общая информация

**Проект:** Веб‑сайт музыкального фестиваля
**Цель бэкенда:** Обеспечить работу фронтенд‑приложения, хранение данных, аутентификацию администраторов и управление контентом фестиваля.

Бэкенд должен быть **чистым, масштабируемым, хорошо структурированным**, с понятным API.

---

## 2. Технологические требования

### 2.1 Стек

* **Node.js** (LTS)
* **Express.js**
* **MongoDB**
* **Mongoose**
* **JWT** (аутентификация)
* **bcrypt** (хеширование паролей)
* **dotenv** (переменные окружения)

### 2.2 Общие требования

* REST API
* JSON как формат обмена данными
* Валидация входящих данных
* Централизованная обработка ошибок
* Логичная структура проекта (controllers / services / models / routes / middleware)

---

## 3. Роли пользователей

### 3.1 Роли

* **admin** — администратор фестиваля (полный доступ)

(Пользователи фестиваля не логинятся — сайт публичный)

---

## 4. Аутентификация и авторизация

### 4.1 Аутентификация

* JWT (access token)
* Хранение пароля только в захешированном виде
* Авторизация через заголовок:

```
Authorization: Bearer <token>
```

### 4.2 Возможности

* Регистрация администратора (один или несколько)
* Вход в админ‑панель
* Получение профиля текущего пользователя
* Защита всех админ‑роутов

---

## 5. Основные сущности (модели)

### 5.1 User (Администратор)

```
- id
- name
- email
- passwordHash
- role (admin)
- createdAt
```

---

### 5.2 FestivalApplication (Заявка на участие)

```
- id
- artistName / bandName
- email
- phone
- description
- socialLinks
- status (new / approved / rejected)
- createdAt
```

Заявка создаётся с публичной части сайта.

---

### 5.3 FestivalContent (Контент фестиваля)

Используется для наполнения сайта.

```
- id
- type (text / image / list)
- key (например: "about", "location", "date")
- value
- updatedAt
```

---

## 6. API (эндпоинты)

### 6.1 Auth

**POST** `/api/auth/register`
Создание администратора

**POST** `/api/auth/login`
Вход администратора

**GET** `/api/auth/profile`
Получение профиля текущего пользователя (JWT)

---

### 6.2 Applications (Заявки)

**POST** `/api/applications`
Создание заявки (публичный доступ)

**GET** `/api/applications`
Получение всех заявок (admin)

**GET** `/api/applications/:id`
Получение одной заявки (admin)

**PATCH** `/api/applications/:id/status`
Изменение статуса заявки (admin)

---

### 6.3 Festival Content

**GET** `/api/content`
Получение контента для фронтенда

**POST** `/api/content`
Создание/обновление контента (admin)

**DELETE** `/api/content/:id`
Удаление контента (admin)

---

## 7. Middleware

* JWT‑проверка
* Проверка роли (admin)
* Обработка ошибок
* Валидация входных данных

---

## 8. Структура проекта

```
backend/
├── src/
│   ├── controllers/
│   ├── services/
│   ├── models/
│   ├── routes/
│   ├── middleware/
│   ├── utils/
│   ├── app.js
│   └── server.js
├── .env
└── package.json
```

---

## 9. Переменные окружения (.env)

```
PORT=3001
MONGO_URI=...
JWT_SECRET=...
JWT_EXPIRES_IN=7d
```

---

## 10. Нефункциональные требования

* Читаемый и документированный код
* Простота расширения
* Минимальная связанность модулей
* Готовность к деплою (Docker‑friendly)

---

## 11. Результат

Готовый бэкенд, полностью совместимый с текущим фронтендом, с чистой архитектурой и понятным API, который можно развивать дальше (артисты, расписание, билеты и т.д.).

---

**Это ТЗ может быть использовано как прямой запрос на реализацию бэкенда.**
