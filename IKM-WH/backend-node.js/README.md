# üéµ Festival App - Backend API

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –±—ç–∫–µ–Ω–¥ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º—É–∑—ã–∫–∞–ª—å–Ω–æ–≥–æ —Ñ–µ—Å—Ç–∏–≤–∞–ª—è –Ω–∞ Node.js + Express + TypeScript + MongoDB.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
# –∏–ª–∏
pnpm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
NODE_ENV=development
PORT=3001
MONGO_URI=mongodb://localhost:27017/festival-app
JWT_SECRET=your_jwt_secret_key_change_in_production
JWT_EXPIRES_IN=7d
CORS_ORIGIN=http://localhost:5173
```

### 3. –ó–∞–ø—É—Å–∫ MongoDB

```bash
# –° –ø–æ–º–æ—â—å—é Docker
docker run -d --name mongodb -p 27017:27017 mongo:latest

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ MongoDB Atlas (–æ–±–ª–∞—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å)
```

### 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π)
npm run dev

# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
npm run build

# –ü—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º
npm start
```

### 5. –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

```bash
curl -X POST http://localhost:3001/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "admin@test.com",
    "password": "admin123",
    "name": "Administrator"
  }'
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
backend-node.js/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ config/          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
‚îÇ   ‚îú‚îÄ‚îÄ controllers/     # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ middleware/      # Middleware —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ models/          # –ú–æ–¥–µ–ª–∏ MongoDB
‚îÇ   ‚îú‚îÄ‚îÄ routes/          # –ú–∞—Ä—à—Ä—É—Ç—ã API
‚îÇ   ‚îú‚îÄ‚îÄ services/        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ types/           # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îú‚îÄ‚îÄ utils/           # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ app.ts           # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Express
‚îÇ   ‚îî‚îÄ‚îÄ server.ts        # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ uploads/             # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ .env                 # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ tsconfig.json
‚îî‚îÄ‚îÄ README.md
```

## üì° API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- `POST /api/auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `POST /api/auth/login` - –í—Ö–æ–¥
- `GET /api/auth/profile` - –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (JWT)
- `GET /api/auth/validate` - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ (JWT)

### üìù –ó–∞—è–≤–∫–∏ –Ω–∞ —É—á–∞—Å—Ç–∏–µ

- `POST /api/applications` - –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É (–ø—É–±–ª–∏—á–Ω—ã–π)
- `GET /api/applications` - –°–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫ (admin)
- `GET /api/applications/:id` - –î–µ—Ç–∞–ª–∏ –∑–∞—è–≤–∫–∏ (admin)
- `PUT /api/applications/:id/status` - –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å (admin)

### üéµ –ì—Ä—É–ø–ø—ã

- `GET /api/groups` - –°–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø
- `GET /api/groups/:id` - –î–µ—Ç–∞–ª–∏ –≥—Ä—É–ø–ø—ã
- `POST /api/groups` - –°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É (admin)
- `PUT /api/groups/:id` - –û–±–Ω–æ–≤–∏—Ç—å –≥—Ä—É–ø–ø—É (admin)
- `DELETE /api/groups/:id` - –£–¥–∞–ª–∏—Ç—å –≥—Ä—É–ø–ø—É (admin)

### üõçÔ∏è –ú–µ—Ä—á

- `GET /api/merch` - –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤
- `GET /api/merch/:id` - –î–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–∞
- `POST /api/merch` - –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä (admin)
- `PUT /api/merch/:id` - –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–≤–∞—Ä (admin)
- `PATCH /api/merch/:id/stock` - –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (admin)
- `DELETE /api/merch/:id` - –£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä (admin)

### üé¥ –ö–∞—Ä—Ç–æ—á–∫–∏

- `GET /api/cards` - –ù–∞–±–æ—Ä—ã –∫–∞—Ä—Ç–æ—á–µ–∫
- `GET /api/cards/:id` - –î–µ—Ç–∞–ª–∏ –Ω–∞–±–æ—Ä–∞
- `POST /api/cards` - –°–æ–∑–¥–∞—Ç—å –Ω–∞–±–æ—Ä (admin)
- `PUT /api/cards/:id` - –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞–±–æ—Ä (admin)
- `DELETE /api/cards/:id` - –£–¥–∞–ª–∏—Ç—å –Ω–∞–±–æ—Ä (admin)

### üìã –ê—Ñ–∏—à–∏

- `GET /api/posters` - –°–ø–∏—Å–æ–∫ –∞—Ñ–∏—à
- `GET /api/posters/:id` - –î–µ—Ç–∞–ª–∏ –∞—Ñ–∏—à–∏
- `POST /api/posters` - –ó–∞–≥—Ä—É–∑–∏—Ç—å –∞—Ñ–∏—à—É (admin)
- `PUT /api/posters/:id` - –û–±–Ω–æ–≤–∏—Ç—å –∞—Ñ–∏—à—É (admin)
- `DELETE /api/posters/:id` - –£–¥–∞–ª–∏—Ç—å –∞—Ñ–∏—à—É (admin)

### üìÖ –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è

- `GET /api/events` - –°–ø–∏—Å–æ–∫ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
- `GET /api/events/:id` - –î–µ—Ç–∞–ª–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
- `POST /api/events` - –°–æ–∑–¥–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ (admin)
- `PUT /api/events/:id` - –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ (admin)
- `PATCH /api/events/:id/status` - –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å (admin)
- `DELETE /api/events/:id` - –£–¥–∞–ª–∏—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ (admin)

### üìÑ –ö–æ–Ω—Ç–µ–Ω—Ç

- `GET /api/content` - –ö–æ–Ω—Ç–µ–Ω—Ç —Å–∞–π—Ç–∞
- `GET /api/content/key/:key` - –ö–æ–Ω—Ç–µ–Ω—Ç –ø–æ –∫–ª—é—á—É
- `POST /api/content` - –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç (admin)
- `PUT /api/content/:id` - –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç (admin)
- `POST /api/content/upsert/:key` - Upsert –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (admin)
- `DELETE /api/content/:id` - –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç (admin)

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- `GET /api/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (admin)
- `GET /api/stats/activity` - –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (admin)

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** —Å –∏—Å—Ç–µ—á–µ–Ω–∏–µ–º —Ç–æ–∫–µ–Ω–æ–≤
- **bcrypt —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –ø–∞—Ä–æ–ª–µ–π
- **Rate limiting** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
- **CORS** –∑–∞—â–∏—Ç–∞
- **Helmet** –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ó–∞—â–∏—Ç–∞** –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π —á–µ—Ä–µ–∑ Mongoose

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

### –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ MongoDB –∑–∞–ø—É—â–µ–Ω–∞
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä: `npm run dev`
3. –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã: `npm run test:api`

### –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

–°–º. —Ñ–∞–π–ª `TEST_INSTRUCTIONS.md` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤.

## üß™ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã:

```bash
curl -X POST http://localhost:3001/api/groups \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -d '{
    "name": "Test Group",
    "genre": "Rock",
    "description": "Amazing rock band",
    "members": ["John", "Mike", "Steve"]
  }'
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π:

```bash
curl -X GET http://localhost:3001/api/events
```

### –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ñ–∏—à–∏:

```bash
curl -X POST http://localhost:3001/api/posters \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -F "title=Main Poster" \
  -F "image=@poster.jpg"
```

## üìã Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

API –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ `swagger.yaml` –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç OpenAPI 3.0.3 —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏.

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Node.js** - —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **Express.js** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **TypeScript** - —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- **MongoDB** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Mongoose** - ODM –¥–ª—è MongoDB
- **JWT** - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **bcrypt** - —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- **Multer** - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
- **express-validator** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

–ë—ç–∫–µ–Ω–¥ –ø–æ—Å—Ç—Ä–æ–µ–Ω —Å —É—á–µ—Ç–æ–º –±—É–¥—É—â–∏—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π:
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –º–æ–¥–µ–ª–∏
- –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- RESTful API –¥–∏–∑–∞–π–Ω
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏, —Ñ–∏–ª—å—Ç—Ä–æ–≤, –ø–æ–∏—Å–∫–∞
- –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ Docker —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

## üéØ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–ë—ç–∫–µ–Ω–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∏–∑ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è.

**üéµ –í–∞—à —Ñ–µ—Å—Ç–∏–≤–∞–ª—å–Ω—ã–π –±—ç–∫–µ–Ω–¥ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!**

